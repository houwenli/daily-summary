## 前端监控

### 为什么要使用前端监控
一个成熟的产品必须要加上前段监控，这样产品运营才能通过数据来分析产品什么地方吸引人，制定更好的运营策略；研发可以更快的监控到系统异常；前端可以检测到性能问题，白屏，首屏加载时间等

所以监控分为下面3大类

1、数据监控，pv，uv，曝光，点击，停留时间等等

2、性能监控
- 不同用户，不同机型和不同系统下的首屏加载时间
- 白屏时间
- 页面渲染时间（css加载完成，js加载完成等等）

3、异常监控
- badjs
- 接口请求异常
- 接口请求是否符合预期
- 接口请求正常比

### 实现上报
现在市面上已经有一些成熟的工具，但是我们可能需要一些自定义的开发，而且很多工具都是收费的

#### 为什么使用gif上报
既然是上报为什么不是使用常规的接口，把数据提交到后台呢
- 防止跨域
  
  一般而言，因为http的一些限制，比如同域名最高请求数限制，打点的域名不会在当前域，如果使用接口的话如果配置不当很容易造成跨域，但是图片的src属性就不会涉及跨域，并且同样可以发起请求

- 防止页面阻塞加载，影响用户体验
  
  只需要new Image就好了，不需要把元素添加进dom中，不会触发回流和重绘，也没有阻塞问题

- 相对其他图片资源来说，体积更小
  
  其实归结为一个字——小。对于1*1px的图片，BMP结构的文件需要74字节，PNG结构的文件需要67字节，GIF结构的文件只需要43字节。同样的响应，GIF可以比BMP节约41%的流量，比PNG节约35%的流量，所以选择gif进行上报。